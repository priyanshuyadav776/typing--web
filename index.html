<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultimate Typing Arena</title>
<link rel="icon" href="logo.png" type="image/png">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0f172a;
  --card:#1e293b;
  --text:#e2e8f0;
  --accent:#38bdf8;
}

.light{
  --bg:#f1f5f9;
  --card:#ffffff;
  --text:#0f172a;
  --accent:#2563eb;
}

*{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,sans-serif}
body{background:var(--bg);color:var(--text);padding:15px;transition:.3s}

.container{
  max-width:1100px;margin:auto;background:var(--card);
  padding:20px;border-radius:20px;box-shadow:0 0 30px rgba(0,0,0,.3)
}

h1{text-align:center;margin-bottom:5px}
.controls{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-bottom:15px}

button,select,input{
  padding:8px 14px;border-radius:25px;border:2px solid var(--accent);
  background:transparent;color:var(--text);cursor:pointer;transition:.3s
}
button:hover{background:var(--accent);color:#fff;transform:scale(1.05)}

.text-display{background:#0002;padding:12px;border-radius:10px;min-height:80px;margin-bottom:10px}
.correct{color:#22c55e}
.incorrect{color:#ef4444;text-decoration:underline}

textarea{
  width:100%;height:90px;border-radius:10px;padding:10px;
  background:#0002;color:var(--text);border:none;outline:2px solid var(--accent);
  margin-bottom:10px;font-size:16px
}

.stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:8px;margin-bottom:10px;text-align:center}
.stat{background:#0002;padding:8px;border-radius:8px}

canvas{background:#0002;border-radius:10px;margin-top:10px}

.leaderboard{margin-top:10px;background:#0002;padding:10px;border-radius:10px;font-size:14px}
.keyboard{margin-top:10px}
.row{display:flex;justify-content:center;margin-bottom:4px}
.key{border:2px solid var(--accent);border-radius:6px;padding:6px 8px;margin:2px;min-width:28px;text-align:center;font-size:12px}
.key.active{background:var(--accent);color:#fff}

@media(max-width:600px){
  .key{min-width:22px;font-size:10px;padding:5px}
}
</style>
</head>
<body>

<div class="container">
<h1>‚å®Ô∏è Ultimate Typing Arena</h1>

<div class="controls">
<input type="text" id="playerName" placeholder="Enter Name">
<select id="timeSelect">
<option value="30">30s</option>
<option value="60">60s</option>
</select>
<button onclick="startTest()">Start</button>
<button onclick="resetTest()">Reset</button>
<button onclick="toggleMode()">üåô/‚òÄÔ∏è</button>
</div>

<div class="text-display" id="textDisplay"></div>
<textarea id="inputArea" placeholder="Start typing..." disabled></textarea>

<div class="stats">
<div class="stat">‚è± <span id="time">0</span>s</div>
<div class="stat">‚ö° WPM <span id="wpm">0</span></div>
<div class="stat">üéØ Acc <span id="accuracy">100%</span></div>
<div class="stat">ü§ñ Bot WPM <span id="botWpm">0</span></div>
</div>

<canvas id="graph" height="100"></canvas>

<div class="leaderboard">
<strong>üèÜ Leaderboard</strong>
<div id="leaderboardList"></div>
</div>

<div class="keyboard" id="keyboard"></div>
</div>

<script>
const words="the quick brown fox jumps over the lazy dog practice makes perfect typing speed accuracy keyboard future success focus power skill creative smart goal dream learn build strong mindset".split(" ");
const textDisplay=document.getElementById("textDisplay");
const inputArea=document.getElementById("inputArea");

let startTime,timer,duration,graphData=[],botSpeed=0;

/* Generate Text */
function generateText(){
  let t=""; for(let i=0;i<35;i++) t+=words[Math.floor(Math.random()*words.length)]+" ";
  return t;
}

/* Start */
function startTest(){
  duration=parseInt(timeSelect.value);
  textDisplay.innerHTML="";
  generateText().split("").forEach(ch=>{
    let s=document.createElement("span"); s.innerText=ch; textDisplay.appendChild(s);
  });

  inputArea.disabled=false; inputArea.value=""; inputArea.focus();
  startTime=new Date(); graphData=[];
  botSpeed=Math.floor(Math.random()*20)+30;

  timer=setInterval(()=>{
    let elapsed=Math.floor((new Date()-startTime)/1000);
    let remain=duration-elapsed;
    time.innerText=remain;
    botWpm.innerText=botSpeed;
    updateGraph();
    if(remain<=0) endTest();
  },1000);
}

/* Typing */
inputArea.addEventListener("input",()=>{
  const entered=inputArea.value.split("");
  const spans=textDisplay.querySelectorAll("span");
  let mistakes=0;
  spans.forEach((s,i)=>{
    const ch=entered[i];
    if(!ch)s.className="";
    else if(ch===s.innerText)s.className="correct";
    else{s.className="incorrect";mistakes++;}
  });
  const minutes=(new Date()-startTime)/60000;
  const w=Math.round((entered.length/5)/minutes||0);
  const acc=Math.max(0,Math.round(((entered.length-mistakes)/entered.length)*100))||100;
  wpm.innerText=w; accuracy.innerText=acc+"%";
});

/* End */
function endTest(){
  clearInterval(timer);
  inputArea.disabled=true;
  saveScore();
}

/* Reset */
function resetTest(){
  clearInterval(timer);
  inputArea.value=""; inputArea.disabled=true; textDisplay.innerHTML="";
  wpm.innerText=0; accuracy.innerText="100%"; time.innerText=0; botWpm.innerText=0;
}

/* Dark/Light */
function toggleMode(){document.body.classList.toggle("light");}

/* Graph */
const ctx=document.getElementById("graph").getContext("2d");
function updateGraph(){
  graphData.push(parseInt(wpm.innerText));
  ctx.clearRect(0,0,graph.width,graph.height);
  ctx.beginPath();
  ctx.moveTo(0,100-graphData[0]);
  graphData.forEach((v,i)=>ctx.lineTo(i*10,100-v));
  ctx.strokeStyle="#38bdf8"; ctx.stroke();
}

/* Leaderboard */
function saveScore(){
  const name=playerName.value||"Guest";
  const score=wpm.innerText;
  let data=JSON.parse(localStorage.getItem("leaderboard")||"[]");
  data.push({name,score});
  data.sort((a,b)=>b.score-a.score);
  data=data.slice(0,5);
  localStorage.setItem("leaderboard",JSON.stringify(data));
  loadLeaderboard();
}
function loadLeaderboard(){
  let data=JSON.parse(localStorage.getItem("leaderboard")||"[]");
  leaderboardList.innerHTML=data.map(d=>`<div>${d.name} - ${d.score} WPM</div>`).join("");
}
loadLeaderboard();

/* Keyboard */
const keys=[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["z","x","c","v","b","n","m"],[" "]];
keys.forEach(r=>{
  let row=document.createElement("div"); row.className="row";
  r.forEach(k=>{
    let key=document.createElement("div");
    key.className="key"; key.dataset.key=k;
    key.textContent=k===" "?"Space":k;
    row.appendChild(key);
  });
  keyboard.appendChild(row);
});
document.addEventListener("keydown",e=>{
  let k=e.key.toLowerCase();
  let el=document.querySelector(`.key[data-key="${k}"]`);
  if(el) el.classList.add("active");
});
document.addEventListener("keyup",e=>{
  let k=e.key.toLowerCase();
  let el=document.querySelector(`.key[data-key="${k}"]`);
  if(el) el.classList.remove("active");
});
</script>

</body>
</html>
